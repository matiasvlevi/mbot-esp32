import {
    TPort, TNode, TEdge
} from '../types'

export function disconnectEdge(
    nodeState: Record<string, TNode>,
    edge: TEdge,
    direction: "from" | "to"
 ) {
    // Disconnect where the edge comes from
    if (edge[direction]) {
        
        const port = nodeState[edge[direction].nodeId].ports.find(
            (p: TPort) => p.id === edge[direction].portId
        );

        if (port) {
            // Remove reference to edge in start port
            if (port.edgeIds) {
                port.edgeIds = port.edgeIds.filter(
                    (edgeId: string) => edgeId !== edge.id
                );
            }
        }
    }
}
